---
title: 18.3.16周记
date: 2018-03-16 13:02:57
tags: 周记
---
## 周记系列
打算专门开一个tag叫做周记：做一个每周的积累回顾。
周记目前的定位主要在三个方面：
1. 工作中的经验总结
2. 自己实践中的经验总结
3. 阅读和学习的总结
4. 自己的一些反思

*顺便提一句，写这个博客时候听的歌是《老司机带带我》，连着听了五个版本整个人都不好了，链接是[老司机带带我](https://www.bilibili.com/video/av1755709/)。*

## 工作
实习渐渐经过了熟悉期，开始把一些经验慢慢积累到博客里。
#### 创建了一种能够使安卓手机正常显示12px以下或奇数2倍px字体的hack
{% codeblock lang:jsx %}
import React from 'react'
import { isAndroid } from '~/lib/userAgent'
/*
* 修正安卓系统小于12px字体,奇数2倍像素大小字体垂直居中问题
* 暂不支持换行
*/

const FontSizeShim = ({ children }) =>
  isAndroid ? (
    <div>
      <span className="FontSizeShimContent">{children}</span>
      <style jsx>{`
        .FontSizeShimContent::before {
          position: absolute;
          font-size: 4em;
          transform: scale(0.25);
          transform-origin: top left;
          content: '${children}';
          white-space:nowrap;
          visibility: visible;
        }
        .FontSizeShimContent {
          position: relative;
          visibility: hidden;
        }
      `}</style>
    </div>
  ) : (
    <span>{children}</span>
  )

export default FontSizeShim

{% endcodeblock%}

#### 一些经验积累
性能优化方面：
1. 频繁触发事件应当使用函数节流，相关的库有`throttle`等。
2. `React`中与`render()`无关的方法应抽出到类中，避免重复渲染。

代码风格方面：
1. 变量命名应当符合英语语法，例如`isSomethingVisible`或`showSomething`。
2. 类方法之间应当空行。
3. 可以用空行来辅助区分代码块。
4. 避免重复的语义在统一块代码中出现，比如`isSomethingVisible`和`showSomething`。

排错经验方面：
1. 设置`webpack`的`sourcemap`。
2. 对于`something1.something2.something3`这种类型的对象属性调用应该谨慎，否则当`something2`不存在时直接调用会报错。处理这种情况的方式有逐级排查或者使用`lodash/get`之类的库辅助检测。

## 实践
这周主要用node写了个命令行工具，用于在 Github Pages 上快速部署自己的项目。
链接在这里： [git-deployer](https://www.npmjs.com/package/git-deployer)。
主要原理就是将指定文件夹的内容拷贝进入一个新文件夹，再将新文件夹的`git remote`设置为指定的地址，进行`force push`。
写了个纪念比利王的网站，优化了music和主站的code，Review了工作室新前端失物招领系统的代码，写了课程表小程序的登陆页面，就不细说了吧。

另外在自己的`bandwagonHost`上面尝试了用`express`脚本结合`githooks`自动部署代码，原理就是`github`自动post一个请求到我的服务器，然后我的服务器收到对应请求之后执行相应的`shell`脚本。

## 阅读与学习
最近在阅读《代码大全》，并过了一下node的教程。《代码大全》中关于编码过程的思考我放在下一节讲。接下来想读的书是吴浩麟的《深入浅出Webpack》和张鑫旭的《CSS世界》。

## 反思与杂谈
其实某种意义上来讲这个章节才是每周最重要的部分吧，会放一些思考在里面。

#### 和设计师沟通的细节程度
在弦歌的时候，因为缺乏交互设计，往往是61或者李林林给我平面设计图，所有的设计和交互细节由我自己敲定，大一点的方面去询问设计师。
在奇迹空间的时候，往往是Tinker直接派发任务，由我来直接借助既有的样式库完成前后端所有的部分。这并不是没有原因：因为在开发的项目是一个后台管理系统，不需要十分注重交互体验。
多抓鱼是我目前以来所认识到的对于设计体验要求最为详细的公司，和印子交谈的过程中往往细节会深化到某一个特别微小辅助元素的跳转。（没错我指的就是新书单列表页由XXX推荐那一行小字）。
这样细微的沟通有好处，可以完全还原设计师的意图和理念，但是也有坏处：修改一个列表页的细节情况竟然需要沟通3~4次。
当然其中有我们之间还不够了解以及我现在有一些做到哪想到哪的问题（这个问题在“对处理事情的顺序思考”一节有详细的描述），但是刨除这些因素，考虑到下一次沟通也有可能依赖上一次沟通，以此类推，即使是小细节的修改，也要沟通两次左右，这对于开发效率会有降低，被提出沟通方正在进行的工作会被打断。
这个问题的细节需要下周和印子谈谈，问问她以前和超强以及Whyme沟通设计细节时的粒度。

#### 对编码目标认识的改变
忽然翻到我以前的一个知乎回答[已经学完 HTML/CSS 但是完全看不懂JavaScript 教程怎么办？](https://www.zhihu.com/question/59650690/answer/181020702)
发现自己对于前端学习的认识已经上升到另外的阶段，不再以库的掌握为标准而评判了。
对于工作中进行code review时出现最多的问题往往有三个

1. 对于英文单词拼写的问题
2. 对于判断结构先后和嵌套设计问题
3. 关于文件结构分配的问题

事实上这些问题正渐渐从“怎么写出来一个功能”到“怎么写好一个功能”迁移。
从这些方面也能感受到自己有一定的提升了。

#### 对处理编码和设计细节的顺序思考
思考设计需求和进行编码时候我习惯做到哪想到哪，而《代码大全》指出，优良的进行编码的方式应该是思考占75%时间，编码占25%时间。考虑到我编码时而对一些技术细节不清晰需要查询，那么也应该至少把这个时间调整为思考50%，编码50%。在编码之前就把需求和架构思考清晰，编码时只注重技术细节才是最优良的思考方式。否则容易陷入编码到一半突然发现这个架构不行或者没弄明白需求的情况。同样的，在二次设计讨论之前，应该谨慎思考清楚自己的问题思路，避免进行三次四次的讨论降低效率打断思路。
