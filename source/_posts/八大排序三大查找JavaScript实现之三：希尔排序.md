---
title: 八大排序三大查找JavaScript实现之三：希尔排序
date: 2017-12-13 19:28:46
tags: 技术博客
---

> 这是我“八大排序三大查找JavaScript实现”系列文章的第三篇，转载请注明来源。  
>所有排序算法针对顺序存储结构，以升序方式排列；三大查找算法不涉及动态查找（查找树与平衡查找树等）的知识。
>文章算法仅供参考复习数据结构与算法之用，实际工程推荐使用使用Array.prototype.sort()函数和Array.prototype.indexOf()函数

## 空间复杂度 时间复杂度 稳定性
* 时间复杂度：希尔排序的时间复杂度和其增量序列有关系，这涉及到数学上尚未解决的难题；不过在某些序列中复杂度可以为O(n1.3);
* 空间复杂度：O(1)
* 稳定性：不稳定

## 算法描述
将无序数组分割为若干个子序列，子序列不是逐段分割的，而是相隔特定的增量的子序列，对各个子序列进行插入排序；然后再选择一个更小的增量，再将数组分割为多个子序列进行排序......最后选择增量为1，即使用直接插入排序，使最终数组成为有序。

## 算法解析
希尔排序是插入排序的一种，该方法实质上是一种分组插入方法。我写的例子中采用的增量是希尔增量，事实上希尔增量并不是效率最好的增量。

希尔排序的时间性能优于直接插入排序的原因：
* 当文件初态基本有序时直接插入排序所需的比较和移动次数均较少。
* 当n值较小时，n和n2的差别也较小，即直接插入排序的最好时间复杂度O(n)和最坏时间复杂度0(n2)差别不大。
* 在希尔排序开始时增量较大，分组较多，每组的记录数目少，故各组内直接插入较快，后来增量di逐渐缩小，分组数逐渐减少，而各组的记录数目逐渐增多，但由于已经按di-1作为距离排过序，使文件较接近于有序状态，所以新的一趟排序过程也较快。

因此，希尔排序在效率上较直接插人排序有较大的改进。
## 算法实现
{% codeblock lang:javascript %}
function shell_sort (array) {
  var temp, gap;
  for (gap = Math.floor(array.length / 2);gap > 0;gap = Math.floor(gap / 2)) {
    for (var i = gap;i < array.length;i += gap) {
      temp = array[i];
      for (var j = i;j >= gap;j -= gap){
        if (temp < array[j - gap]) {
          array[j] = array[j - gap];
        } else {
          break;
        }
      }
      array[j] = temp;
    }
  }
}

arr = [6, 5, 7, 2, 4, 3, 0, 9, 1, 8];
shell_sort(arr);
console.log(arr); //[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
{% endcodeblock %}
